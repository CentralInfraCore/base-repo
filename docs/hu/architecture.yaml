---
title: Rendszer Architektúra Áttekintés
description: >
  A projekt magas szintű architektúráját és működési filozófiáját mutatja be.

concepts:
  - name: Sablon Gyár Koncepció
    summary: >
      Ez a repository egy 'Sablon Gyár' (Template Factory), ami más repository-k
      létrehozására szolgáló sablonokat gyárt.
    components:
      - type: Sablon Repo
        description: >
          A CI/CD folyamatok, a release logika és a közös konfigurációk forrása
          (source of truth).
        repo: base-repo (ez a repo)
      - type: Termelési Repo
        description: >
          A sablonból származtatott, konkrét üzleti logikát tartalmazó repository.

  - name: Repók Ökoszisztémája
    summary: >
      A rendszer több, egymással kapcsolatban álló repository-ból épül fel.
      A frissítések a sablon repóból automatikusan terjednek a termelési repók
      felé.
    diagram: |
      graph TD
          A[Template Repo (base-repo)] -- "Renovate frissíti" --> B(Production Repo 1);
          A -- "Renovate frissíti" --> C(Production Repo 2);
          A -- "Renovate frissíti" --> D(Production Repo N);

  - name: "Automatizáció Motorja: Renovate"
    summary: >
      A Renovate figyeli a sablon repository release tag-jeit, és automatikusan
      Pull Requesteket (PR) nyit a termelési repókon.
    details:
      - >
        Biztosítja, hogy a központi logika (pl. biztonsági javítás) automatikusan
        és konzisztensen eljusson minden termékhez.

  - name: Az Egységes Compiler (compiler.py) Szerepe
    summary: >
      A rendszer egyetlen, egységes `compiler.py` scriptet használ, amelynek a
      szerepe a futási környezettől függően kettős.
    roles:
      - role: Sablon Karbantartó
        context: A `base-repo`-ban futtatva
        responsibility: A sablon repository karbantartása és verziózása.
        task: >
          A `project.yaml` központi konfigurációs fájl validálása és "lezárása"
          (finalizing) a sablon egy új verziójának kiadásakor.
      - role: Termék Gyártó
        context: A származtatott termelési repóban futtatva
        responsibility: A sablon "hasznos terhe" (`payload`).
        task: >
          Egy konkrét forrásfájlból egy digitálisan aláírt, ellenjegyzett
          "műtárgy" (artifact) létrehozása a termelési repo saját release
          folyamatában.
    conclusion: >
      Ez az egységes megközelítés biztosítja, hogy a termelési repók mindig
      pontosan ugyanazt a logikát és eszközt használják.

  - name: Változások Útja és Branching Modell
    summary: A változások egy szigorúan definiált útvonalon haladnak a rendszereken keresztül.
    diagram: |
      graph LR
          subgraph "Template Repo (base-repo)"
              T_MAIN[main] -- "release tag" --> T_REL(v1.2.0);
              T_DF[df/feature] --> T_MAIN;
              T_SCHEMAS[schemas/f/1] -- "specializáció" --> T_MAIN;
          end

          subgraph "Production Repo"
              P_MAIN[main];
              P_DF[df/feature];
              T_REL -- "Renovate PR" --> P_DF;
              P_DF -- "merge" --> P_MAIN;
          end

          style T_REL fill:#f9f,stroke:#333,stroke-width:2px
    steps:
      - "1. Fejlesztés a Sablon Repóban: `df/xxx` ágakon."
      - "2. Sablon Release: A `main` ágról új `release` tag jön létre."
      - "3. Terjesztés: A Renovate PR-t nyit a termelési repók `df/xxx` ágaira."
      - "4. Integráció a Termékbe: A fejlesztők beolvasztják a frissítést a saját munkájukba, majd a `main` ágra."
